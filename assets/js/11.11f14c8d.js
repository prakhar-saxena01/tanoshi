(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{397:function(t,e,a){"use strict";a.r(e);var s=a(54),l=Object(s.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"development"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#development"}},[t._v("#")]),t._v(" Development")]),t._v(" "),a("p",[t._v("Tanoshi backend use "),a("a",{attrs:{href:"https://github.com/pyros2097/rust-embed",target:"_blank",rel:"noopener noreferrer"}},[t._v("rust-embed"),a("OutboundLink")],1),t._v(" to embed static files to the binary. Because of this, "),a("code",[t._v("tanoshi-web")]),t._v(" need to be built first so "),a("code",[t._v("tanoshi")]),t._v(" will be able to build successfully.")]),t._v(" "),a("h2",{attrs:{id:"frontend"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#frontend"}},[t._v("#")]),t._v(" Frontend")]),t._v(" "),a("ol",[a("li",[t._v("Install Rust")]),t._v(" "),a("li",[t._v("Install trunk and wasm-bindgen-cli"),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("cargo install trunk wasm-bindgen-cli\n")])])])]),t._v(" "),a("li",[t._v("Change directory into "),a("code",[t._v("tanoshi-web")]),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("cd crates/tanoshi-web \n")])])])]),t._v(" "),a("li",[t._v("Build"),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("trunk build\n")])])])])]),t._v(" "),a("h2",{attrs:{id:"backend"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#backend"}},[t._v("#")]),t._v(" Backend")]),t._v(" "),a("ol",[a("li",[t._v("Change directory into "),a("code",[t._v("crates/tanoshi")]),t._v(" or root repository")]),t._v(" "),a("li",[t._v("Install dependencies for https://github.com/faldez/libarchive-rs")]),t._v(" "),a("li",[t._v("Install dependency for https://gitlab.com/taricorp/llvm-sys.rs\n"),a("ul",[a("li",[t._v("on Windows, you can download from https://github.com/faldez/tanoshi-builder/releases/download/v0.1.0/LLVM.7z extract to a directory and set environment variable "),a("code",[t._v("$LLVM_SYS_110_PREFIX")]),t._v(" to "),a("code",[t._v("/path/to/llvm")]),t._v(" or build it yourself")]),t._v(" "),a("li",[t._v("on macOS, install using homebrew "),a("code",[t._v("brew install llvm@11")]),t._v(" ands set "),a("code",[t._v("LLVM_SYS_110_PREFIX")]),t._v(" to "),a("code",[t._v("/usr/local/opt/llvm")])]),t._v(" "),a("li",[t._v("on Linux"),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("wget")]),t._v(" https://apt.llvm.org/llvm.sh \n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("chmod")]),t._v(" +x llvm.sh\n./llvm.sh "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("11")]),t._v("\n")])])])])])]),t._v(" "),a("li",[t._v("Build"),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("cargo build\n")])])])])]),t._v(" "),a("h2",{attrs:{id:"desktop"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#desktop"}},[t._v("#")]),t._v(" Desktop")]),t._v(" "),a("ol",[a("li",[t._v("Do steps for both frontend and backend")]),t._v(" "),a("li",[t._v("Install depedencies for tauri")]),t._v(" "),a("li",[t._v("Install tauri cli"),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("cargo install tauri-cli --version ^1.0.0-beta\n")])])])]),t._v(" "),a("li",[t._v("Run"),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("cd crates/tanoshi-web\ntauri serve\n\ncd crates/tanoshi\ncargo tauri dev\n")])])])])]),t._v(" "),a("p",[t._v("PS. On linux you may need to install libssl-dev on ubuntu/debian or openssl-dev on fedora/centos")])])}),[],!1,null,null,null);e.default=l.exports}}]);